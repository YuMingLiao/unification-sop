<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Generic.Unification.Tutorial</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">unification-sop-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Generic.Unification.Tutorial</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Introduction</a></li><li><a href="#g:2">Smart constructors</a></li><li><a href="#g:3">Unification</a></li><li><a href="#g:4">Discussion</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Use unification-sop if you want a mechanism to derive unification for your
  datatype in a generic way. When talking of unification, the reference
  implementation is the &lt;<a href="http://hackage.haskell.org/package/unification-fd">http://hackage.haskell.org/package/unification-fd</a>
  unification-fd&gt; package. However that package has two major shortcomings in my
  opinion:</p><ul><li>Your datatype has to be in the form of the fixpoint of a functor.</li><li>It's not immediately clear how to use it, and the documentation can be
    daunting.</li></ul><p>that said, use that package if you are using unification for typechecking
   (which is the main use-case of that package) because it is surely more stable.</p><p>In this package we will see how to construct a different mechanism for
  unification which is strictly more expressive, letting us work with datatypes
  that are not in the fixpoint form.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Foo">Foo</a><ul class="subs"><li>= <a href="#v:FooI">FooI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li>| <a href="#v:FooS">FooS</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li></ul></li><li class="src short"><a href="#v:ex1">ex1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:ex2">ex2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Introduction</h1></a><div class="doc"><p>So, let's say you have a datatype, and you want to unify two terms:</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Foo" class="def">Foo</a> <a href="#t:Foo" class="selflink">#</a></p><div class="doc"><p>This is an example we'll use throughout the package</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FooI" class="def">FooI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:FooS" class="def">FooS</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Foo" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Eq:1"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Show:2"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>] -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Generic:3"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> x -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Generic:4"></span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Generic" title="Generics.SOP.Universe">Generic</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: [[<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]] <a href="#t:Code" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Rep" title="Generics.SOP.Universe">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Rep" title="Generics.SOP.Universe">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:HasDatatypeInfo:5"></span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:HasDatatypeInfo" title="Generics.SOP.Universe">HasDatatypeInfo</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:HasDatatypeInfo:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Type-Metadata.html#t:DatatypeInfo" title="Generics.SOP.Type.Metadata">DatatypeInfo</a> <a href="#t:DatatypeInfoOf" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:datatypeInfo">datatypeInfo</a> :: proxy <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Metadata.html#t:DatatypeInfo" title="Generics.SOP.Metadata">DatatypeInfo</a> (<a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>) <a href="#v:datatypeInfo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Rep:6"></span> <span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Rep:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;Foo&quot; &quot;Generic.Unification.Tutorial&quot; &quot;unification-sop-0.1.0.0-inplace&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FooI&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-43-:" title="GHC.Generics">:+:</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FooS&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>)))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Code:7"></span> <span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Code:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-GGP.html#t:GCode" title="Generics.SOP.GGP">GCode</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:DatatypeInfoOf:8"></span> <span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:DatatypeInfoOf:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-GGP.html#t:GDatatypeInfoOf" title="Generics.SOP.GGP">GDatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></div></details></td></tr></table></details></div></div><div class="doc"><p>The first step is deriving the generic instances. You can do that via</p><pre>deriving (GHC.Generic, Generic, HasDatatypeInfo)</pre><p>provided you have the <code>DeriveGeneric</code> and <code>DeriveAnyClass</code> extensions enabled
 (Generic and HasDatatypeInfo come from the generic-sop package).</p><p>And now, as your type is a tree which has only primitive types at the leaves,
 you get to construct generic terms.</p><p>A few examples of terms constructed in this way, with the prolog translation</p><pre>ex1 :: Term Foo
ex1 = Var 1           -- X</pre><pre>ex2 :: Term Foo
ex2 = Con (FooI 3)          -- fooI 3</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex1 :: Term Foo
</code></strong>Var 1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex4 :: Term Foo
</code></strong>fooS (Con &quot;ciao&quot;) (Con (FooI 2))
</pre></div><div class="top"><p class="src"><a id="v:ex1" class="def">ex1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex1" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ex2" class="def">ex2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex2" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Smart constructors</h1></a><div class="doc"><p>To make more easy working with terms, we propose the usage of smart
 constructors. For example, for our Foo datatype, we could define:</p><pre>fooS :: Term String -&gt; Term Foo -&gt; Term Foo
fooS ts tf = Rec . SOP . S . Z $ ts :* tf :* Nil</pre><pre>fooI :: Term Int -&gt; Term Foo
fooI ti = Rec . SOP . Z $ ti :* Nil</pre><p>This constructs could be completely generated by the library (via generics or
 TH), but in this iteration of the library they have to be generated by the
 user. It is worth noting that the show instances I generated are geared
 towards this use-case, and that is automatic.</p><p>With there smart constructors defined, we can revisit previous examples:</p><pre>ex3', ex4', ex5', ex5'var, ex5'var2 :: Term Foo
ex3' = fooI (Var 1)
ex4' = fooS (Con &quot;ciao&quot;) (Con $ FooI 2)
ex5' = fooS (Con &quot;ciao&quot;) (fooS (Var 1) (Con $ FooI 2))
ex5'var = fooS (Var 2) (fooS (Con &quot;hey&quot;) (Con $ FooI 2))
ex5'var2 = fooS (Var 1) (fooS (Con &quot;hey&quot;) (Con $ FooI 2))</pre></div><a href="#g:3" id="g:3"><h1>Unification</h1></a><div class="doc"><p>Now let's have some examples of unification:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>unify (fooS (Var 2) (fooS (Con &quot;hey&quot;) (Con $ FooI 2))) (fooS (Var 1) (fooS (Con &quot;hey&quot;) (Con $ FooI 2)))
</code></strong>Right (fooS (Var 1) (fooS (Con &quot;hey&quot;) (Con (FooI 2))))
</pre><p>Which is `fooS X (fooS &quot;hey&quot; (fooI 2)) == fooS Y (fooS &quot;hey&quot; (fooI 2))` in
 prolog-like notation. Take a better example here.</p><p>The result of unification can be Right and the substituted term, or Left and
 an explanation of the error.</p></div><a href="#g:4" id="g:4"><h1>Discussion</h1></a><div class="doc"><p>Here the differences with unification-fd</p><p>TODO Move the examples</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>