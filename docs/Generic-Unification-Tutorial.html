<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Generic.Unification.Tutorial</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">unification-sop-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Generic.Unification.Tutorial</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Introduction</a></li><li><a href="#g:2">Examples of Terms</a></li><li><a href="#g:3">Smart constructors</a></li><li><a href="#g:4">Unification</a></li><li><a href="#g:5">Further examples</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Use unification-sop if you want a mechanism to generically derive prolog-style
  unification for your datatypes, with minimal boilerplate.</p><p>When talking of unification, the usual implementation is the
  <a href="http://hackage.haskell.org/package/unification-fd">unification-fd</a> package.
  However that package has two major shortcomings in my opinion:</p><ul><li>Your datatype has to be in the form of the fixpoint of a functor.</li><li>It's not immediately clear how to use it, the typeclasses and the types
    involved, and the lack of documentation can be daunting.</li></ul><p>In this package we construct a different mechanism for unification which is
  strictly more expressive, letting us work with datatypes that are not in the
  fixpoint form, and simpler, requiring only an additional datatype, and that
  does not perform abysmally worse (since the core algorithm is the same). That
  said, try to use `unification-fd` if you want unification for typechecking
  (which is the main use-case of that package) because it is surely more stable
  and it still has more optimization than this one (like, path-compression).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Foo">Foo</a><ul class="subs"><li>= <a href="#v:FooI">FooI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li>| <a href="#v:FooS">FooS</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li></ul></li><li class="src short"><a href="#v:ex1">ex1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:ex2">ex2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:ex3">ex3</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:ex4">ex4</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:exU1">exU1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:exU2">exU2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li><li class="src short"><a href="#v:exU3">exU3</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Introduction</h1></a><div class="doc"><p>Let's consider a datatype we will use as an example through this tutorial:</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Foo" class="def">Foo</a> <a href="#t:Foo" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FooI" class="def">FooI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:FooS" class="def">FooS</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Foo" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Eq:1"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Show:2"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>] -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Generic:3"></span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> x -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Generic:4"></span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Generic" title="Generics.SOP.Universe">Generic</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: [[<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]] <a href="#t:Code" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Rep" title="Generics.SOP.Universe">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Rep" title="Generics.SOP.Universe">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:HasDatatypeInfo:5"></span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:HasDatatypeInfo" title="Generics.SOP.Universe">HasDatatypeInfo</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:HasDatatypeInfo:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> :: <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Type-Metadata.html#t:DatatypeInfo" title="Generics.SOP.Type.Metadata">DatatypeInfo</a> <a href="#t:DatatypeInfoOf" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:datatypeInfo">datatypeInfo</a> :: proxy <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> -&gt; <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Metadata.html#t:DatatypeInfo" title="Generics.SOP.Metadata">DatatypeInfo</a> (<a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>) <a href="#v:datatypeInfo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Rep:6"></span> <span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Rep:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;Foo&quot; &quot;Generic.Unification.Tutorial&quot; &quot;unification-sop-0.1.0.0-inplace&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FooI&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-43-:" title="GHC.Generics">:+:</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FooS&quot; <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a> :: <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>) <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///nix/store/ppndnm4xrmyljdg1bsvi2n2vrkicb2g2-ghc-8.6.3-doc/share/doc/ghc/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a>)))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:Code:7"></span> <span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:Code:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:Code" title="Generics.SOP.Universe">Code</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-GGP.html#t:GCode" title="Generics.SOP.GGP">GCode</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Foo:DatatypeInfoOf:8"></span> <span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></span> <a href="#t:Foo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Foo:DatatypeInfoOf:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Generic-Unification-Tutorial.html">Generic.Unification.Tutorial</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-Universe.html#t:DatatypeInfoOf" title="Generics.SOP.Universe">DatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> = <a href="file:///nix/store/dg4nnhpbn1j7gg70nvg0wkiqazjlyqg1-generics-sop-0.4.0.1-doc/share/doc/generics-sop-0.4.0.1/html/Generics-SOP-GGP.html#t:GDatatypeInfoOf" title="Generics.SOP.GGP">GDatatypeInfoOf</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></div></details></td></tr></table></details></div></div><div class="doc"><p>To use this library you need to deriving the generic instances. You
 can do that via:</p><pre>deriving (GHC.Generic, Generic, HasDatatypeInfo)</pre><p>provided you have the <code>DeriveGeneric</code> and <code>DeriveAnyClass</code> extensions enabled
 (Generic and HasDatatypeInfo come from
 <a href="http://hackage.haskell.org/package/generics-sop-0.4.0.1">generic-sop</a>).
 That's all the boilerplate you need!</p></div><a href="#g:2" id="g:2"><h1>Examples of Terms</h1></a><div class="doc"><p>Taking inspiration from prolog, we would like to express terms that are of
 type Foo, but can have (typed) logical variables as subterms. In this
 library, that's the role of the <code><a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a></code> datatype. In this case a <code><a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a></code> <code><a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></code> is
 a <code><a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></code> that can have logical variables as subterms.</p><p>Let's see some examples, where I also give a prolog translation (haskell
 constructors are seen as prolog <a href="https://www.metalevel.at/prolog/data#clean">clean
 representations</a>). Keep in mind
 that the show instances that display these result are automatically generated
 to be consistent with the smart constructors I'll talk about later.</p></div><div class="top"><p class="src"><a id="v:ex1" class="def">ex1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex1" class="selflink">#</a></p><div class="doc"><p>A logical variable of type <code><a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a></code>, equivalent to <em>X</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex1
</code></strong>Var 1
</pre></div></div><div class="top"><p class="src"><a id="v:ex2" class="def">ex2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex2" class="selflink">#</a></p><div class="doc"><p>A completely determined term, in fact expressing `FooI 3` as a `Term Foo`.
 Equivalent to <em>fooI(3)</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex2
</code></strong>Con (FooI 3)
</pre></div></div><div class="top"><p class="src"><a id="v:ex3" class="def">ex3</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex3" class="selflink">#</a></p><div class="doc"><p>A term which uses the FooI constructor, but the integer inside is replaced
 with a logical variable, equivalent to <em>fooI(X)</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex3
</code></strong>fooI (Var 1)
</pre></div></div><div class="top"><p class="src"><a id="v:ex4" class="def">ex4</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:ex4" class="selflink">#</a></p><div class="doc"><p>A term which mixes both defined values and variables, equivalent to <em>fooS(&quot;hi&quot;, X)</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ex4
</code></strong>fooS (Con &quot;hi&quot;) (Var 1)
</pre></div></div><a href="#g:3" id="g:3"><h1>Smart constructors</h1></a><div class="doc"><p>To make easier working with terms, I propose the usage of smart constructors.
 For example, for our Foo datatype, we could define:</p><pre>fooS :: Term String -&gt; Term Foo -&gt; Term Foo
fooS ts tf = Rec . SOP . S . Z $ ts :* tf :* Nil</pre><pre>fooI :: Term Int -&gt; Term Foo
fooI ti = Rec . SOP . Z $ ti :* Nil</pre><p>This constructs could be completely generated by the library (via generics or
 TH), but in this iteration of the library they have to be generated by the
 user. It is worth noting that the show instances I generated are geared
 towards this use-case, and that is automatic. With there smart constructors
 defined, we can actually write previous examples exactly the way they are
 shown by our show instance.</p><p>Depending on your needs, you could also define these as bidirectional
 patterns instead, enabling PatternSynonyms and writing:</p><pre>pattern TFooI :: Term Int -&gt; Term Foo
pattern TFooI t = Rec (SOP (Z (t :* Nil)))</pre><pre>pattern TFooR :: Term String -&gt; Term Foo -&gt; Term Foo
pattern TFooR ti tf = Rec (SOP (S (Z (ti :* tf :* Nil))))</pre></div><a href="#g:4" id="g:4"><h1>Unification</h1></a><div class="doc"><p>Now let's have an example of a unification between two terms:</p></div><div class="top"><p class="src"><a id="v:exU1" class="def">exU1</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:exU1" class="selflink">#</a></p><div class="doc"><p>Equivalent to <em>fooS(&quot;Hello&quot;, fooS(X, fooI(Y)))</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>exU1
</code></strong>fooS (Con &quot;Hello&quot;) (fooS (Var 1) (fooI (Var 1)))
</pre></div></div><div class="top"><p class="src"><a id="v:exU2" class="def">exU2</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:exU2" class="selflink">#</a></p><div class="doc"><p>Equivalent to <em>fooS(X, fooS(&quot;World&quot;, fooI(Y)))</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>exU2
</code></strong>fooS (Var 2) (fooS (Con &quot;World&quot;) (fooI (Var 1)))
</pre></div></div><div class="top"><p class="src"><a id="v:exU3" class="def">exU3</a> :: <a href="Generic-Unification-Term.html#t:Term" title="Generic.Unification.Term">Term</a> <a href="Generic-Unification-Tutorial.html#t:Foo" title="Generic.Unification.Tutorial">Foo</a> <a href="#v:exU3" class="selflink">#</a></p><div class="doc"><p>Equivalent to <em>fooS(X, fooS(&quot;Earth&quot;, fooI(Y)))</em> in prolog.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>exU2
</code></strong>fooS (Var 2) (fooS (Con &quot;World&quot;) (fooI (Var 1)))
</pre></div></div><div class="doc"><p>The result of unification can be Right and the substituted term, or Left and
 an explanation of the error.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:t unify exU1 exU2
</code></strong>unify exU1 exU2 :: Monad m =&gt; UnificationT m (Term Foo)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runIdentity . evalUnificationT $ unify exU1 exU2
</code></strong>Right (fooS (Con &quot;Hello&quot;) (fooS (Con &quot;World&quot;) (fooI (Var 1))))
</pre><p>In this case we can see that the unification succeeded, leaving the Int-typed
 variable alone.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runIdentity . evalUnificationT $ unify exU2 exU3
</code></strong>Left IncompatibleUnification
</pre><p>In this case we can see that the two terms can't be unified.</p></div><a href="#g:5" id="g:5"><h1>Further examples</h1></a><div class="doc"><p>If you want further inspiration, in the <code><a href="Generic-Unification.html#v:Hinze" title="Generic.Unification">Hinze</a></code> module I
 implemented a full typed prolog complete with the Cut construct, following
 Hinze's paper on denotational semantic of a prolog interpreter. If you have
 question don't hesitate to write them in the github issue tracker.</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>